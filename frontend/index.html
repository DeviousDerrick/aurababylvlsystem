<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level System | Aurababy</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif !important;
            font-weight: 800 !important;
        }

        body {
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .particle {
            position: fixed;
            width: 3px;
            height: 3px;
            background: rgba(100, 200, 255, 0.6);
            border-radius: 50%;
            pointer-events: none;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        /* Navigation */
        .nav-container {
            max-width: 900px;
            margin: 0 auto 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-btns {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            border: none;
            font-weight: 800;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6);
        }

        .btn-info {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Main Container */
        .main-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .level-display {
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
            text-shadow: 0 0 30px rgba(79, 172, 254, 0.5);
        }

        .title-badge {
            display: inline-block;
            padding: 10px 30px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 50px;
            font-weight: 800;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }

        /* Progress Section */
        .progress-section {
            margin: 40px 0;
        }

        .progress-container {
            width: 100%;
            height: 50px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 25px;
            overflow: hidden;
            border: 2px solid rgba(79, 172, 254, 0.3);
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .exp-info {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.95rem;
            font-weight: 800;
            color: #a0d4f7;
        }

        .countdown {
            text-align: center;
            margin-top: 10px;
            font-size: 1rem;
            color: #4facfe;
            font-weight: 800;
        }

        /* Redeem Section */
        .redeem-section {
            margin: 40px 0;
            padding: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .redeem-section h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #4facfe;
        }

        .redeem-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .redeem-input {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid rgba(79, 172, 254, 0.3);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .redeem-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }

        .redeem-message {
            text-align: center;
            min-height: 30px;
            font-weight: 600;
            color: #4facfe;
        }

        /* Rewards Grid */
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .reward-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(79, 172, 254, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .reward-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .reward-card:hover {
            transform: translateY(-5px);
            border-color: #4facfe;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }

        .reward-card:hover::before {
            transform: scaleX(1);
        }

        .reward-card.unlocked {
            border-color: #00f2fe;
            background: rgba(79, 172, 254, 0.1);
        }

        .reward-level {
            font-size: 2rem;
            font-weight: 800;
            color: #4facfe;
            margin-bottom: 10px;
        }

        .reward-title {
            font-size: 1.1rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #fff;
        }

        .reward-description {
            font-size: 0.9rem;
            font-weight: 800;
            color: #a0d4f7;
            margin-bottom: 15px;
        }

        .reward-status {
            font-weight: 800;
            font-size: 0.9rem;
        }

        .locked { color: #f5576c; }
        .unlocked-status { color: #00f2fe; }

        /* Popup */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 60px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 10000;
            transition: transform 0.3s ease;
            text-align: center;
        }

        .popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .popup h2 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #0f2027 0%, #2c5364 100%);
            padding: 40px;
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(79, 172, 254, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-header h2 {
            font-size: 2rem;
            color: #4facfe;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-btn:hover {
            transform: rotate(90deg);
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .theme-option {
            padding: 30px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
            font-weight: 800;
        }

        .theme-option:hover {
            transform: scale(1.05);
            border-color: white;
        }

        .theme-option.active {
            border-color: #00f2fe;
            box-shadow: 0 0 20px rgba(0, 242, 254, 0.5);
        }

        .save-code-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid rgba(79, 172, 254, 0.3);
        }

        .save-code {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 10px;
            color: #4facfe;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            word-break: break-all;
            margin: 10px 0;
        }

        /* QTE Overlay */
        .qte-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 20000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .qte-overlay.active {
            display: flex;
        }

        .qte-message {
            font-size: 3rem;
            font-weight: 800;
            color: #f5576c;
            margin-bottom: 20px;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .qte-timer {
            font-size: 3rem;
            font-weight: 800;
            color: #4facfe;
            margin-top: 20px;
        }

        .qte-orb {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #4facfe, #764ba2);
            cursor: pointer;
            animation: orbPulse 1s infinite;
            box-shadow: 0 0 30px rgba(79, 172, 254, 0.8);
        }

        @keyframes orbPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .color-picker-group {
            margin: 20px 0;
        }

        .color-picker-group label {
            display: block;
            margin-bottom: 10px;
            color: #4facfe;
            font-weight: 800;
        }

        .color-picker {
            width: 100%;
            height: 50px;
            border: 2px solid rgba(79, 172, 254, 0.3);
            border-radius: 10px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.3);
        }

        #imageDropZone:hover {
            border-color: #4facfe;
            background: rgba(79, 172, 254, 0.05);
        }

        .rejuvenate-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            border-radius: 20px;
            border: 2px solid rgba(102, 126, 234, 0.5);
            text-align: center;
        }

        .rejuvenate-section h2 {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .rejuvenate-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stat-box {
            flex: 1;
            min-width: 150px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            font-weight: 800;
            color: #a0d4f7;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .level-display { font-size: 3.5rem; }
            .main-container { padding: 20px; }
            .rewards-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Particles -->
    <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
    <div class="particle" style="left: 40%; animation-delay: 1s;"></div>
    <div class="particle" style="left: 50%; animation-delay: 3s;"></div>
    <div class="particle" style="left: 60%; animation-delay: 5s;"></div>
    <div class="particle" style="left: 70%; animation-delay: 2.5s;"></div>
    <div class="particle" style="left: 80%; animation-delay: 4.5s;"></div>
    <div class="particle" style="left: 90%; animation-delay: 1.5s;"></div>

    <!-- Navigation -->
    <div class="nav-container">
        <div class="nav-btns">
            <a href="achievements.html" class="btn btn-primary">üèÜ Achievements</a>
            <a href="leaderboard.html" class="btn btn-secondary">üìä Leaderboard</a>
        </div>
        <div class="btn btn-info" id="timeSpent">‚è±Ô∏è 0m 0s</div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Header -->
        <div class="header">
            <h1>Aurababy Leveling</h1>
            <div class="level-display" id="levelDisplay">0</div>
            <div class="title-badge" id="titleBadge">üçº Sperm Cell</div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">0%</div>
            </div>
            <div class="exp-info">
                <span>EXP: <span id="currentExp">0</span> / <span id="nextExp">100</span></span>
                <span id="countdown">Next EXP in: 60s</span>
            </div>
        </div>

        <!-- Rejuvenate Section (shows at level 100+) -->
        <div class="rejuvenate-section" id="rejuvenateSection" style="display: none;">
            <h2 style="font-weight: 800;">üí´ Rejuvenated Mode</h2>
            <p style="color: #a0d4f7; margin-bottom: 20px; font-weight: 800;">You've reached the peak! Break through the level cap!</p>
            <div class="rejuvenate-stats">
                <div class="stat-box">
                    <div class="stat-value" id="rejuvenateCount">No</div>
                    <div class="stat-label" style="font-weight: 800;">Rejuvenated</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalLevels">100</div>
                    <div class="stat-label" style="font-weight: 800;">Current Level</div>
                </div>
            </div>
        </div>

        <!-- Redeem Section -->
        <div class="redeem-section">
            <h2>üéÅ Redeem Code</h2>
            <div class="redeem-input-group">
                <input type="text" class="redeem-input" id="codeInput" placeholder="Enter your code here...">
                <button class="btn btn-primary" onclick="redeemCode()">Redeem</button>
            </div>
            <div class="redeem-message" id="redeemMessage"></div>
        </div>

        <!-- Rewards Grid -->
        <div class="rewards-grid">
            <div class="reward-card" data-level="25" id="reward25">
                <div class="reward-level">Level 25</div>
                <div class="reward-title">üíæ Profile & Save</div>
                <div class="reward-description">Generate a save code to backup your progress!</div>
                <div class="reward-status locked">üîí Locked</div>
            </div>

            <div class="reward-card" data-level="100" id="reward100">
                <div class="reward-level">Level 100</div>
                <div class="reward-title">üí´ Rejuvenate</div>
                <div class="reward-description">Break the level cap and continue beyond 100!</div>
                <div class="reward-status locked">üîí Locked</div>
            </div>
        </div>

        <!-- UI Customization Section (Always Available) -->
        <div style="margin-top: 40px; padding: 30px; background: rgba(0,0,0,0.2); border-radius: 20px; border: 1px solid rgba(79, 172, 254, 0.2); text-align: center;">
            <h2 style="color: #4facfe; margin-bottom: 15px; font-size: 1.5rem; font-weight: 800;">üé® Customize Your UI</h2>
            <p style="color: #a0d4f7; margin-bottom: 20px; font-weight: 800;">Change your colors and theme anytime!</p>
            <button class="btn btn-primary" onclick="openModal('customUIModal')" style="font-weight: 800;">Open Customization</button>
        </div>
    </div>

    <!-- Level Up Popup -->
    <div class="popup" id="levelUpPopup">
        <h2 style="font-weight: 800;">üéâ LEVEL UP! üéâ</h2>
        <p style="font-size: 1.2rem; font-weight: 800;">You reached level <span id="popupLevel">0</span>!</p>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="saveModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 style="font-weight: 800;">üë§ Your Profile</h2>
                <button class="close-btn" onclick="closeModal('saveModal')">&times;</button>
            </div>
            
            <!-- Profile Setup (shows if no username) -->
            <div id="profileSetup" style="display: none;">
                <div class="save-code-box">
                    <h3 style="color: #4facfe; margin-bottom: 15px; text-align: center; font-weight: 800;">‚ú® Create Your Profile</h3>
                    
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                        <!-- Profile Picture Upload -->
                        <div id="imageDropZone" style="width: 150px; height: 150px; border: 3px dashed rgba(79, 172, 254, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; background: rgba(0,0,0,0.3); position: relative; overflow: hidden; transition: all 0.3s ease;">
                            <div id="dropZoneText" style="text-align: center; color: #4facfe; font-size: 0.9rem; padding: 20px; font-weight: 800;">
                                <div style="font-size: 2rem; margin-bottom: 5px;">üì∏</div>
                                Click or drag image
                            </div>
                            <img id="profilePreview" style="display: none; width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                            <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                        </div>
                        
                        <!-- Username Input -->
                        <div style="width: 100%;">
                            <label style="display: block; color: #4facfe; margin-bottom: 10px; font-weight: 800;">Choose Your Username:</label>
                            <input type="text" id="usernameInput" placeholder="Enter username..." maxlength="20" style="width: 100%; padding: 15px; border-radius: 12px; border: 2px solid rgba(79, 172, 254, 0.3); background: rgba(0, 0, 0, 0.3); color: white; font-size: 1rem; text-align: center; font-weight: 800;">
                            <p style="font-size: 0.8rem; color: #a0d4f7; margin-top: 5px; text-align: center; font-weight: 800;">‚ö†Ô∏è This cannot be changed later!</p>
                        </div>
                        
                        <button class="btn btn-primary" style="width: 100%; font-weight: 800;" onclick="createProfile()">üöÄ Create Profile</button>
                    </div>
                </div>
            </div>

            <!-- Profile Display (shows after setup) -->
            <div id="profileDisplay" style="display: none;">
                <!-- Profile Header -->
                <div style="display: flex; align-items: center; gap: 20px; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 15px; margin-bottom: 20px;">
                    <img id="displayProfileImage" src="" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #4facfe; box-shadow: 0 0 20px rgba(79, 172, 254, 0.5);">
                    <div style="flex: 1;">
                        <h2 id="displayUsername" style="color: #4facfe; margin-bottom: 10px; font-size: 1.8rem; font-weight: 800;"></h2>
                        <div style="display: inline-block; padding: 5px 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; font-size: 0.9rem; font-weight: 800;">Level <span id="profileLevel">0</span></div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; text-align: center; border: 1px solid rgba(79, 172, 254, 0.2);">
                        <div style="font-size: 2rem; font-weight: 800; color: #4facfe;" id="statExp">0</div>
                        <div style="font-size: 0.85rem; color: #a0d4f7; margin-top: 5px; font-weight: 800;">Total EXP</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; text-align: center; border: 1px solid rgba(79, 172, 254, 0.2);">
                        <div style="font-size: 2rem; font-weight: 800; color: #f5576c;" id="statTime">0h</div>
                        <div style="font-size: 0.85rem; color: #a0d4f7; margin-top: 5px; font-weight: 800;">Time Played</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; text-align: center; border: 1px solid rgba(79, 172, 254, 0.2);">
                        <div style="font-size: 2rem; font-weight: 800; color: #667eea;" id="statReborn">0</div>
                        <div style="font-size: 0.85rem; color: #a0d4f7; margin-top: 5px; font-weight: 800;">Rejuvenated</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; text-align: center; border: 1px solid rgba(79, 172, 254, 0.2);">
                        <div style="font-size: 2rem; font-weight: 800; color: #00f2fe;" id="statCodes">0</div>
                        <div style="font-size: 0.85rem; color: #a0d4f7; margin-top: 5px; font-weight: 800;">Codes Used</div>
                    </div>
                </div>

                <!-- Save & Load Section -->
                <div class="save-code-box">
                    <h3 style="color: #4facfe; margin-bottom: 10px; font-weight: 800;">üíæ Backup Your Progress</h3>
                    <p style="font-size: 0.9rem; color: #a0d4f7; margin-bottom: 10px; font-weight: 800;">Copy this code and store it safely! You can use it to restore everything.</p>
                    <textarea class="save-code" id="saveCodeDisplay" readonly></textarea>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px; font-weight: 800;" onclick="copySaveCode()">üìã Copy Save Code</button>
                    <div id="copyMessage" style="margin-top: 10px; text-align: center; font-weight: 800; color: #00f2fe;"></div>
                </div>

                <div class="save-code-box" style="margin-top: 20px;">
                    <h3 style="color: #4facfe; margin-bottom: 10px; font-weight: 800;">üì• Restore Profile</h3>
                    <p style="font-size: 0.9rem; color: #a0d4f7; margin-bottom: 10px; font-weight: 800;">Paste your save code to restore your progress:</p>
                    <textarea class="save-code" id="loadCodeInput" placeholder="Paste your save code here..."></textarea>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px; font-weight: 800;" onclick="loadSaveCode()">üì• Load Save Code</button>
                    <div id="loadMessage" style="margin-top: 10px; text-align: center; font-weight: 800;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom UI Modal -->
    <div class="modal" id="customUIModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="font-weight: 800;">üé® Customize Your UI</h2>
                <button class="close-btn" onclick="closeModal('customUIModal')">&times;</button>
            </div>

            <h3 style="color: #4facfe; margin: 20px 0 10px; font-weight: 800;">Preset Themes:</h3>
            <div class="theme-grid">
                <div class="theme-option" data-theme="default" style="background: linear-gradient(135deg, #0f2027 0%, #2c5364 100%);" onclick="applyTheme('default')">
                    <div style="font-weight: 800;">üåä Ocean</div>
                </div>
                <div class="theme-option" data-theme="sunset" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%);" onclick="applyTheme('sunset')">
                    <div style="font-weight: 800;">üåÖ Sunset</div>
                </div>
                <div class="theme-option" data-theme="forest" style="background: linear-gradient(135deg, #0f9b0f 0%, #00d2ff 100%);" onclick="applyTheme('forest')">
                    <div style="font-weight: 800;">üå≤ Forest</div>
                </div>
                <div class="theme-option" data-theme="galaxy" style="background: linear-gradient(135deg, #2e1437 0%, #764ba2 100%);" onclick="applyTheme('galaxy')">
                    <div style="font-weight: 800;">üåå Galaxy</div>
                </div>
                <div class="theme-option" data-theme="fire" style="background: linear-gradient(135deg, #ff0844 0%, #ffb199 100%);" onclick="applyTheme('fire')">
                    <div style="font-weight: 800;">üî• Fire</div>
                </div>
            </div>

            <h3 style="color: #4facfe; margin: 30px 0 10px; font-weight: 800;">Custom Colors:</h3>
            <div class="color-picker-group">
                <label style="font-weight: 800;">Background Start Color:</label>
                <input type="color" class="color-picker" id="bgColor1" value="#0f2027">
            </div>
            <div class="color-picker-group">
                <label style="font-weight: 800;">Background End Color:</label>
                <input type="color" class="color-picker" id="bgColor2" value="#2c5364">
            </div>
            <button class="btn btn-primary" style="width: 100%; margin-top: 20px; font-weight: 800;" onclick="applyCustomColors()">Apply Custom Colors</button>
        </div>
    </div>

    <!-- QTE Overlay -->
    <div class="qte-overlay" id="qteOverlay">
        <div class="qte-message" style="font-weight: 800;">‚ö° AURA SURGE! ‚ö°</div>
        <div style="font-size: 1.5rem; color: white; font-weight: 800;">Click the 3 orbs fast!</div>
        <div class="qte-timer" id="qteTimer" style="font-weight: 800;">5.0s</div>
    </div>

    <script>
        // Core Variables
        let totalSeconds = parseInt(localStorage.getItem("totalSeconds") || "0");
        let displaySec = parseInt(localStorage.getItem("displaySec") || "0");
        let exp = parseInt(localStorage.getItem("exp") || "0");
        let secondsLeft = parseInt(localStorage.getItem("secondsLeft") || "60");
        let usedCodes = JSON.parse(localStorage.getItem("usedCodes") || "{}");
        let rejuvenated = localStorage.getItem("rejuvenated") === "true";
        let currentTheme = localStorage.getItem("currentTheme") || "default";
        
        // Profile Variables
        let username = localStorage.getItem("username") || null;
        let profileImage = localStorage.getItem("profileImage") || null;

        const codes10000 = ["69THEGOOONERISGONE69", "THIEFESTOFGHOULS", "THEGANGSTANDTHEGHOULSFALLS"];

const codes5000 = [
  "teroswillrebirth",
  "300GamesBaby!",
  "400GamesSoon?",
  "Thefastestbehbehalive901",      // New 5000 Exp code
  "wowveryfastclickerbaby2222"     // New 5000 Exp code
];

const codes2500 = ["scarebaby","goonerbaby","creeplingbaby","babyiscoming","67","aurababybegoated","aurababywontdie"];

const codes1000 = ["derrickistuff","danielistuff","mannyistuff","grantistuff","emmetistuff","shout-out-to-adonis"];

const codesHoliday = ["merrychristmas", "merryhanukkah", "hollyandjolly", "jinglethebells", "sleddingbaby!", "gingerbaby", "santababy!", "jollybaby"];

const validCodes = [...codes10000, ...codes5000, ...codes2500, ...codes1000, ...codesHoliday].map(c => c.toLowerCase());
        // Title System
        const titleMap = {
            1: "üß¨ Sperm Cell",
            5: "üë∂ Newborn",
            10: "‚ú®üë∂ Aurababy",
            25: "üåæüë∂ Aurafarmer",
            50: "üååüë∂ Celestial Baby",
            75: "üëº Divine Baby",
            100: "üí´ The Baby That Holds Auraüí´"
        };

        // Level System with Exponential Growth
        const BASE_XP_COST = 100;
        const XP_EXPONENT = 1.5;
        const MAX_LEVEL_CAP = 100;
        
        function getExpForLevel(level) {
            if (level <= 1) return 0;
            return Math.floor(BASE_XP_COST * Math.pow(level - 1, XP_EXPONENT));
        }

        function getLevelFromExp(xp) {
            let level = 1;
            while (getExpForLevel(level + 1) <= xp) {
                level++;
                // Stop at 100 unless rejuvenated
                if (level >= MAX_LEVEL_CAP && !rejuvenated) break;
            }
            return level;
        }

        // Time Display
        function updateDisplayTime() {
            let mins = Math.floor(displaySec / 60);
            let secs = displaySec % 60;
            document.getElementById("timeSpent").innerText = `‚è±Ô∏è ${mins}m ${secs}s`;
        }

        setInterval(() => {
            totalSeconds++;
            displaySec++;
            localStorage.setItem("totalSeconds", totalSeconds);
            localStorage.setItem("displaySec", displaySec);
            updateDisplayTime();
        }, 1000);

        // Main UI Update
        function updateUI() {
            localStorage.setItem("exp", exp);
            const level = getLevelFromExp(exp);
            const currentLevelExp = getExpForLevel(level);
            const nextLevelExp = getExpForLevel(level + 1);

            // Update level display
            document.getElementById("levelDisplay").innerText = level;
            document.getElementById("currentExp").innerText = exp.toLocaleString();

            // Update title
            let title = "üí´ Aura Master";
            for (let lvl in titleMap) {
                if (level >= parseInt(lvl)) {
                    title = titleMap[lvl];
                }
            }
            document.getElementById("titleBadge").innerText = title;

            // Update progress bar
            if (level >= MAX_LEVEL_CAP && !rejuvenated) {
                document.getElementById("progressBar").style.width = "100%";
                document.getElementById("progressBar").innerText = "MAX LEVEL - Rejuvenate to Continue!";
                document.getElementById("nextExp").innerText = "‚àû";
            } else {
                const expInLevel = exp - currentLevelExp;
                const expNeeded = nextLevelExp - currentLevelExp;
                const percent = Math.floor((expInLevel / expNeeded) * 100);
                
                document.getElementById("progressBar").style.width = percent + "%";
                document.getElementById("progressBar").innerText = percent + "%";
                document.getElementById("nextExp").innerText = nextLevelExp.toLocaleString();
            }

            // Update rewards
            updateRewards(level);

            // Show rejuvenate section if level 100+
            if (level >= MAX_LEVEL_CAP) {
                document.getElementById("rejuvenateSection").style.display = "block";
                document.getElementById("rejuvenateCount").innerText = rejuvenated ? "Yes" : "Not Yet";
                document.getElementById("totalLevels").innerText = level.toLocaleString();
            } else {
                document.getElementById("rejuvenateSection").style.display = "none";
            }
        }

        // Update Reward Cards
        function updateRewards(level) {
            const rewards = [
                { id: "reward25", level: 25, action: () => openModal('saveModal') },
                { id: "reward100", level: 100, action: () => performRejuvenate() }
            ];

            rewards.forEach(reward => {
                const card = document.getElementById(reward.id);
                const statusEl = card.querySelector('.reward-status');
                
                if (level >= reward.level) {
                    card.classList.add('unlocked');
                    statusEl.className = 'reward-status unlocked-status';
                    statusEl.innerHTML = '‚úÖ Unlocked - Click to Use!';
                    
                    // Remove old listeners
                    card.replaceWith(card.cloneNode(true));
                    const newCard = document.getElementById(reward.id);
                    
                    if (reward.action) {
                        newCard.style.cursor = 'pointer';
                        newCard.addEventListener('click', reward.action);
                    }
                } else {
                    statusEl.className = 'reward-status locked';
                    statusEl.innerHTML = 'üîí Locked';
                }
            });
        }

        // EXP Gain Timer
        setInterval(() => {
            secondsLeft--;
            document.getElementById("countdown").innerText = `Next EXP in: ${secondsLeft}s`;
            
            if (secondsLeft <= 0) {
                // Only gain EXP if not at max level or if rejuvenated
                if (getLevelFromExp(exp) < MAX_LEVEL_CAP || rejuvenated) {
                    exp += 20;
                    updateUI();
                    checkLevelUp();
                }
                secondsLeft = 60;
            }
            localStorage.setItem("secondsLeft", secondsLeft);
        }, 1000);

        // Level Up Detection
        let prevLevel = getLevelFromExp(exp);
        function checkLevelUp() {
            const currentLevel = getLevelFromExp(exp);
            if (currentLevel > prevLevel) {
                showLevelUpPopup(currentLevel);
                prevLevel = currentLevel;
            }
        }

        function showLevelUpPopup(level) {
            const popup = document.getElementById("levelUpPopup");
            document.getElementById("popupLevel").innerText = level;
            popup.classList.add("show");
            setTimeout(() => popup.classList.remove("show"), 3000);
        }

        // Code Redemption
        window.redeemCode = function() {
            const input = document.getElementById("codeInput");
            const code = input.value.trim().toLowerCase();
            const msg = document.getElementById("redeemMessage");

            if (!code) {
                msg.innerText = "Please enter a code!";
                msg.style.color = "#f5576c";
                return;
            }

            if (usedCodes[code]) {
                msg.innerText = "Code already used!";
                msg.style.color = "#f5576c";
                return;
            }

            if (!validCodes.includes(code)) {
                msg.innerText = "Invalid code!";
                msg.style.color = "#f5576c";
                return;
            }

            let reward = 1000;
            if (codes5000.map(c => c.toLowerCase()).includes(code)) reward = 5000;
            else if (codes2500.map(c => c.toLowerCase()).includes(code)) reward = 2500;

            exp += reward;
            usedCodes[code] = true;
            localStorage.setItem("usedCodes", JSON.stringify(usedCodes));
            updateUI();
            checkLevelUp();

            msg.innerText = `‚úÖ Code redeemed! +${reward.toLocaleString()} EXP`;
            msg.style.color = "#00f2fe";
            input.value = "";
        };

        // Save/Load System
        function generateSaveCode() {
            const saveData = {
                exp: exp,
                usedCodes: usedCodes,
                totalSeconds: totalSeconds,
                rejuvenated: rejuvenated,
                currentTheme: currentTheme,
                username: username,
                profileImage: profileImage,
                timestamp: Date.now()
            };
            return btoa(JSON.stringify(saveData));
        }

        window.copySaveCode = function() {
            const code = generateSaveCode();
            const textarea = document.getElementById("saveCodeDisplay");
            textarea.value = code;
            textarea.select();
            document.execCommand('copy');
            
            // Try modern API as well
            if (navigator.clipboard) {
                navigator.clipboard.writeText(code);
            }
            
            const msg = document.getElementById("copyMessage");
            msg.innerText = "‚úÖ Copied to clipboard!";
            msg.style.color = "#00f2fe";
            setTimeout(() => msg.innerText = "", 3000);
        };

        window.loadSaveCode = function() {
            const input = document.getElementById("loadCodeInput");
            const msg = document.getElementById("loadMessage");
            
            try {
                const decoded = JSON.parse(atob(input.value.trim()));
                
                exp = decoded.exp || 0;
                usedCodes = decoded.usedCodes || {};
                totalSeconds = decoded.totalSeconds || 0;
                rejuvenated = decoded.rejuvenated || false;
                currentTheme = decoded.currentTheme || "default";
                username = decoded.username || null;
                profileImage = decoded.profileImage || null;
                
                localStorage.setItem("exp", exp);
                localStorage.setItem("usedCodes", JSON.stringify(usedCodes));
                localStorage.setItem("totalSeconds", totalSeconds);
                localStorage.setItem("rejuvenated", rejuvenated);
                localStorage.setItem("currentTheme", currentTheme);
                localStorage.setItem("username", username || "");
                localStorage.setItem("profileImage", profileImage || "");
                
                applyTheme(currentTheme);
                updateUI();
                prevLevel = getLevelFromExp(exp);
                
                msg.innerText = "‚úÖ Profile loaded successfully!";
                msg.style.color = "#00f2fe";
                input.value = "";
                
                setTimeout(() => {
                    closeModal('saveModal');
                    if (username) {
                        openModal('saveModal'); // Reopen to show profile
                    }
                }, 1500);
            } catch (e) {
                msg.innerText = "‚ùå Invalid save code!";
                msg.style.color = "#f5576c";
            }
        };

        // Profile Image Upload
        function setupImageUpload() {
            const dropZone = document.getElementById('imageDropZone');
            const fileInput = document.getElementById('profileImageInput');
            const preview = document.getElementById('profilePreview');
            const dropText = document.getElementById('dropZoneText');

            // Click to upload
            dropZone.addEventListener('click', () => fileInput.click());

            // File input change
            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file && file.type.startsWith('image/')) {
                    handleImageFile(file);
                }
            });

            // Drag and drop
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#4facfe';
                dropZone.style.backgroundColor = 'rgba(79, 172, 254, 0.1)';
            });

            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = 'rgba(79, 172, 254, 0.5)';
                dropZone.style.backgroundColor = 'rgba(0,0,0,0.3)';
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = 'rgba(79, 172, 254, 0.5)';
                dropZone.style.backgroundColor = 'rgba(0,0,0,0.3)';
                
                const file = e.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    handleImageFile(file);
                }
            });

            function handleImageFile(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        // Resize image to max 400x400 to save storage
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        let width = img.width;
                        let height = img.height;
                        const maxSize = 400;
                        
                        if (width > height) {
                            if (width > maxSize) {
                                height *= maxSize / width;
                                width = maxSize;
                            }
                        } else {
                            if (height > maxSize) {
                                width *= maxSize / height;
                                height = maxSize;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        const resizedImage = canvas.toDataURL('image/jpeg', 0.8);
                        profileImage = resizedImage;
                        
                        preview.src = resizedImage;
                        preview.style.display = 'block';
                        dropText.style.display = 'none';
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        // Create Profile
        window.createProfile = function() {
            const usernameInput = document.getElementById('usernameInput');
            const enteredUsername = usernameInput.value.trim();
            
            if (!enteredUsername) {
                alert('Please enter a username!');
                return;
            }
            
            if (enteredUsername.length < 3) {
                alert('Username must be at least 3 characters!');
                return;
            }
            
            username = enteredUsername;
            localStorage.setItem('username', username);
            
            if (profileImage) {
                localStorage.setItem('profileImage', profileImage);
            }
            
            // Show profile display
            document.getElementById('profileSetup').style.display = 'none';
            updateProfileDisplay();
            document.getElementById('profileDisplay').style.display = 'block';
        };

        // Update Profile Display
        function updateProfileDisplay() {
            if (!username) return;
            
            document.getElementById('displayUsername').innerText = username;
            
            // Set profile image
            if (profileImage) {
                document.getElementById('displayProfileImage').src = profileImage;
            } else {
                // Create SVG with first letter of username
                const firstLetter = username ? username[0].toUpperCase() : '?';
                const svgImage = `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect width="100" height="100" fill="%234facfe"/><text x="50" y="65" font-size="50" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-weight="bold">${firstLetter}</text></svg>`;
                document.getElementById('displayProfileImage').src = svgImage;
            }
            
            // Update stats
            document.getElementById('profileLevel').innerText = getLevelFromExp(exp);
            document.getElementById('statExp').innerText = exp.toLocaleString();
            
            const hours = Math.floor(totalSeconds / 3600);
            const mins = Math.floor((totalSeconds % 3600) / 60);
            document.getElementById('statTime').innerText = hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
            
            document.getElementById('statReborn').innerText = rejuvenated ? "Yes" : "No";
            document.getElementById('statCodes').innerText = Object.keys(usedCodes).length;
            
            // Update save code
            document.getElementById('saveCodeDisplay').value = generateSaveCode();
        }

        // Theme System
        const themes = {
            default: { bg1: "#0f2027", bg2: "#2c5364" },
            sunset: { bg1: "#ff6b6b", bg2: "#ffd93d" },
            forest: { bg1: "#0f9b0f", bg2: "#00d2ff" },
            galaxy: { bg1: "#2e1437", bg2: "#764ba2" },
            fire: { bg1: "#ff0844", bg2: "#ffb199" }
        };

        window.applyTheme = function(themeName) {
            const theme = themes[themeName];
            document.body.style.background = `linear-gradient(135deg, ${theme.bg1} 0%, ${theme.bg2} 100%)`;
            currentTheme = themeName;
            localStorage.setItem("currentTheme", themeName);
            
            // Update active state
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.querySelector(`[data-theme="${themeName}"]`).classList.add('active');
        };

        window.applyCustomColors = function() {
            const color1 = document.getElementById("bgColor1").value;
            const color2 = document.getElementById("bgColor2").value;
            document.body.style.background = `linear-gradient(135deg, ${color1} 0%, ${color2} 100%)`;
            localStorage.setItem("customColor1", color1);
            localStorage.setItem("customColor2", color2);
        };

        // Rejuvenate System
        window.performRejuvenate = function() {
            if (getLevelFromExp(exp) < MAX_LEVEL_CAP) {
                alert("You must reach Level 100 first!");
                return;
            }

            if (rejuvenated) {
                alert("You've already rejuvenated! Continue leveling past 100!");
                return;
            }

            const confirmed = confirm("Rejuvenate and break the level cap?\n\nThis will allow you to continue gaining EXP and levels beyond 100 with exponential growth!");
            
            if (confirmed) {
                rejuvenated = true;
                localStorage.setItem("rejuvenated", "true");
                updateUI();
                alert("üí´ Rejuvenated! You can now level up past 100!");
            }
        };

        // Modal Functions
        window.openModal = function(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            
            if (modalId === 'saveModal') {
                if (!username) {
                    // Show profile setup
                    document.getElementById('profileSetup').style.display = 'block';
                    document.getElementById('profileDisplay').style.display = 'none';
                    setupImageUpload();
                } else {
                    // Show profile display
                    document.getElementById('profileSetup').style.display = 'none';
                    document.getElementById('profileDisplay').style.display = 'block';
                    updateProfileDisplay();
                }
            }
            
            if (modalId === 'customUIModal') {
                document.querySelector(`[data-theme="${currentTheme}"]`).classList.add('active');
            }
        };

        window.closeModal = function(modalId) {
            document.getElementById(modalId).classList.remove('active');
        };

        // QTE System
        setInterval(() => {
            if (Math.random() > 0.95) triggerSurge();
        }, 120000);

        function triggerSurge() {
            const overlay = document.getElementById("qteOverlay");
            overlay.classList.add("active");
            let timeLeft = 5.0;
            let clicked = 0;

            for (let i = 0; i < 3; i++) {
                let orb = document.createElement("div");
                orb.className = "qte-orb";
                orb.style.top = (15 + Math.random() * 70) + "%";
                orb.style.left = (15 + Math.random() * 70) + "%";
                orb.onclick = () => {
                    orb.remove();
                    clicked++;
                    if (clicked >= 3) endSurge(true);
                };
                overlay.appendChild(orb);
            }

            let timer = setInterval(() => {
                timeLeft -= 0.1;
                document.getElementById("qteTimer").innerText = timeLeft.toFixed(1) + "s";
                if (timeLeft <= 0) endSurge(false);
            }, 100);

            function endSurge(success) {
                clearInterval(timer);
                overlay.classList.remove("active");
                document.querySelectorAll(".qte-orb").forEach(o => o.remove());
                
                if (success) {
                    exp += 500;
                    updateUI();
                    checkLevelUp();
                    alert("‚ö° SURGE SUCCESS! +500 EXP");
                } else {
                    alert("‚ùå SURGE FAILED! Try again next time!");
                }
            }
        }

        // Initialize
        updateDisplayTime();
        updateUI();
        applyTheme(currentTheme);
        
        // Apply custom colors if saved
        const savedColor1 = localStorage.getItem("customColor1");
        const savedColor2 = localStorage.getItem("customColor2");
        if (savedColor1 && savedColor2) {
            document.getElementById("bgColor1").value = savedColor1;
            document.getElementById("bgColor2").value = savedColor2;
        }
    </script>
</body>
</html>
